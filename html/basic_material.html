<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>Step 00 – MeshBasicMaterial (three.js r128)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>html,body{height:100%;margin:0} canvas{display:block}</style>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
<script>
  // Scene / Camera / Renderer
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0xCCCCCC);

  const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 100);
  camera.position.set(0, 1, 3);

  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(innerWidth, innerHeight);
  renderer.outputEncoding = THREE.sRGBEncoding;
  document.body.appendChild(renderer.domElement);

  const controls = new THREE.OrbitControls(camera, renderer.domElement);

  const directionalLight = new THREE.DirectionalLight(0xffffff, 10);
  directionalLight.position.set(3, 5, 3).normalize();
  scene.add(directionalLight);

      // Environment map (cube) สำหรับ reflection ของ PBR
  const cubeUrls = [
    'https://threejs.org/examples/textures/cube/Bridge2/posx.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/negx.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/posy.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/negy.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/posz.jpg',
    'https://threejs.org/examples/textures/cube/Bridge2/negz.jpg'
  ];
  const envMap = new THREE.CubeTextureLoader().load(cubeUrls);
  envMap.encoding = THREE.sRGBEncoding;
  scene.environment = envMap; // IBL

  // Geometry
  // ใช้ Box ให้เห็นผิวชัด และหมุนแล้วสังเกตได้ง่าย
  const geo = new THREE.SphereGeometry(1, 32, 32);

  // Basic Material (ไม่รับแสง)
  // สีจะคงเดิม ไม่ขึ้นกับไฟ/ทิศกล้อง — เหมาะกับ UI, debug, flat color

  const mat = new THREE.MeshStandardMaterial({
    color: 0xffffff,   // เปลี่ยนสีที่นี่
    roughness: 0.08,   // Lower roughness for more shine
    metalness: 1,
    envMap: envMap     // Add environment map for reflections
  });

  const cube = new THREE.Mesh(geo, mat);
  scene.add(cube);

  // วงจรเรนเดอร์
  addEventListener('resize', () => {
    camera.aspect = innerWidth / innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth, innerHeight);
  });

  (function loop(){
    cube.rotation.x += 0.01;
    cube.rotation.y += 0.015;
    renderer.render(scene, camera);
    requestAnimationFrame(loop);
  })();
</script>
</body>
</html>
